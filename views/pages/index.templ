package pages

import (
	"image-processing/views/base"
	"image-processing/views/components/buttons"
	"image-processing/views/components/inputs"
)

templ IndexPage() {
	@base.Base(base.BaseProps{Title: "A very fast image compressor"}) {
		<script>
			var loadFile = function(event) {
				var output = document.getElementById('preview');
				output.src = URL.createObjectURL(event.target.files[0]);
				output.onload = function() {
					URL.revokeObjectURL(output.src) // free memory
				}
			};
		</script>
		<div class="w-full h-full flex justify-center flex-col gap-8 px-8">
			<h1 class="text-4xl font-bold text-white">A very fast image compressor made with Golang</h1>
			<form class="w-full flex flex-col gap-4" id="form" hx-encoding="multipart/form-data" hx-post="/upload" hx-target="#result">
				@inputs.FileInput(inputs.FileInputProps{
					Id:   "file",
					Name: "file",
					OnChange: templ.ComponentScript{
						Call: "loadFile(event)",
					},
				})
				@buttons.Button(buttons.ButtonProps{Title: "Click me!"})
				<div id="result"></div>
			</form>
		</div>
	}
}
